<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registration</title>
  <link rel="stylesheet" href="/public/styles.css" />
</head>
<body>
  <h1>User Registration</h1>

  <% if (errors.length) { %>
    <div class="errors">
      <ul>
        <% errors.forEach(e => { %>
          <li><%= e.msg %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <form action="/register" method="post" enctype="multipart/form-data" class="card">
    <label>Username
      <input type="text" name="username" value="<%= old.username || '' %>" required/>
    </label>

    <label>Email
      <input type="email" name="email" value="<%= old.email || '' %>" required/>
    </label>

    <label>Password
      <input type="password" name="password" required/>
    </label>

    <label>Confirm Password
      <input type="password" name="confirmPassword" required/>
    </label>

    <fieldset>
      <legend>Gender</legend>
      <label><input type="radio" name="gender" value="Male" <%= old.gender === 'Male' ? 'checked' : '' %>/> Male</label>
      <label><input type="radio" name="gender" value="Female" <%= old.gender === 'Female' ? 'checked' : '' %>/> Female</label>
      <label><input type="radio" name="gender" value="Other" <%= old.gender === 'Other' ? 'checked' : '' %>/> Other</label>
    </fieldset>

    <fieldset>
      <legend>Hobbies</legend>
      <% const hobbyList = ['Reading','Sports','Music','Coding']; %>
      <% hobbyList.forEach(h => { %>
        <label><input type="checkbox" name="hobbies" value="<%= h %>" <%= (old.hobbies && (Array.isArray(old.hobbies) ? old.hobbies.includes(h) : old.hobbies === h)) ? 'checked' : '' %>/> <%= h %></label>
      <% }) %>
    </fieldset>

    <label>Profile Picture (single)
      <input type="file" name="profilePic" accept="image/*"/>
    </label>

    <label>Other Pictures (multiple)
      <input type="file" name="otherPics" accept="image/*" multiple/>
    </label>

    <button type="submit">Register</button>
  </form>
</body>
</html>
